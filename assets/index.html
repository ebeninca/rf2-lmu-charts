<!DOCTYPE html>
<html>
    <head>
        {%metas%}
        <title>{%title%}</title>
        {%favicon%}
        {%css%}
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
                margin: 0;
                padding: 0;
            }
            .main-container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 0 20px;
            }
            @media (max-width: 768px) {
                .main-container {
                    padding: 0 16px;
                }
            }
            body.dark-mode {
                background-color: #1a1a1a;
            }
            body.dark-mode #react-entry-point {
                filter: invert(100%);
            }
            body.dark-mode img, body.dark-mode video {
                filter: invert(100%);
            }
            .theme-toggle {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                background: #007bff;
                border: none;
                border-radius: 50px;
                width: 60px;
                height: 30px;
                cursor: pointer;
                transition: background 0.3s;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 6px;
            }
            .theme-toggle:hover {
                background: #0056b3;
            }
            .theme-toggle::before {
                content: '\2600';
                font-size: 18px;
                z-index: 1;
                margin-left: 1px;
            }
            .theme-toggle::after {
                content: '\263e';
                font-size: 18px;
                z-index: 1;
                margin-right: 4px;
            }
            .theme-toggle-slider {
                position: absolute;
                top: 50%;
                left: 3px;
                transform: translateY(-50%);
                width: 24px;
                height: 24px;
                background: white;
                border-radius: 50%;
                transition: transform 0.3s;
            }
            .theme-toggle.active {
                background: #6c757d;
            }
            .theme-toggle.active .theme-toggle-slider {
                transform: translate(30px, -50%);
            }
            @keyframes fadeOut {
                0% { opacity: 1; }
                100% { opacity: 0; visibility: hidden; }
            }
        </style>
        <script>
            function toggleTheme() {
                document.body.classList.toggle('dark-mode');
                document.querySelector('.theme-toggle').classList.toggle('active');
                localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
            }
            window.addEventListener('DOMContentLoaded', function() {
                const darkMode = localStorage.getItem('darkMode');
                if (darkMode === null || darkMode === 'true') {
                    document.body.classList.add('dark-mode');
                    document.querySelector('.theme-toggle').classList.add('active');
                }
            });
        </script>
    </head>
    <body>
        <button class="theme-toggle" onclick="toggleTheme()">
            <div class="theme-toggle-slider"></div>
        </button>
        {%app_entry%}
        <footer>
            {%config%}
            {%scripts%}
            {%renderer%}
        </footer>
    </body>
</html>
<script>
// Auto-hide success message after 3 seconds
document.addEventListener('DOMContentLoaded', function() {
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
                if (node.id === 'success-message') {
                    setTimeout(function() {
                        if (node.parentNode) {
                            node.style.opacity = '0';
                            node.style.transition = 'opacity 0.5s';
                            setTimeout(function() {
                                if (node.parentNode) {
                                    node.parentNode.removeChild(node);
                                }
                            }, 500);
                        }
                    }, 3000);
                }
            });
        });
    });
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>