<!DOCTYPE html>
<html>

<head>
    {%metas%}
    <title>{%title%}</title>
    {%favicon%}
    {%css%}
    <link rel="stylesheet" href="/assets/styles.css">
    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            document.querySelector('.theme-toggle').classList.toggle('active');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }
        window.addEventListener('DOMContentLoaded', function () {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === null || darkMode === 'true') {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-toggle').classList.add('active');
            }
        });
    </script>
</head>

<body>
    <button class="theme-toggle" onclick="toggleTheme()">
        <div class="theme-toggle-slider"></div>
    </button>
    {%app_entry%}
    <footer>
        {%config%}
        {%scripts%}
        {%renderer%}
    </footer>
</body>

</html>
<script>
    // Auto-hide success message after 3 seconds
    document.addEventListener('DOMContentLoaded', function () {
        const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                mutation.addedNodes.forEach(function (node) {
                    if (node.id === 'success-message') {
                        setTimeout(function () {
                            if (node.parentNode) {
                                node.style.opacity = '0';
                                node.style.transition = 'opacity 0.5s';
                                setTimeout(function () {
                                    if (node.parentNode) {
                                        node.parentNode.removeChild(node);
                                    }
                                }, 500);
                            }
                        }, 3000);
                    }
                });
            });
        });
        observer.observe(document.body, { childList: true, subtree: true });
    });
</script>